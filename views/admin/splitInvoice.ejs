<%- include('../partials/header') %>

<div class="container mt-5">
    <h1 class="mb-4">Split Invoice</h1>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Booking Code: <%= invoice.invoiceNumber %></h5>
            <p class="card-text">Total Amount: ₩<%= invoice.totalAmount.toLocaleString() %></p>

            <h6 class="mt-4">Sub Invoices:</h6>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <% subInvoices.forEach(function(invoice) { %>
                        <tr>
                            <td><%= invoice.date %></td>
                            <td>₩<%= invoice.total.toLocaleString() %></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>

            <h6 class="mt-4">Purchase Details:</h6>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Purchase ID</th>
                        <th>Hotel Name</th>
                        <th>Room Name</th>
                        <th>Amount</th>
                        <th>Nights</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <% purchaseDetails.forEach(function(detail) { %>
                        <tr>
                            <td><%= detail.purchaseId %></td>
                            <td><%= detail.hotelName %></td>
                            <td><%= detail.roomName %></td>
                            <td>₩<%= detail.amount.toLocaleString() %></td>
                            <td><%= detail.nights %></td>
                            <td>₩<%= (detail.amount * detail.nights).toLocaleString() %></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>
</div>
